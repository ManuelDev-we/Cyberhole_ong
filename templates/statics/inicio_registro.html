{% extends "base.html" %}

{% block title %}Iniciar Sesión / Registrarse{% endblock %}

{% block content %}
<section style="padding: 40px; max-width: 600px; margin: 100px auto 120px; background: #f7f7f7; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
  <!-- Botones principales -->
  <div style="text-align: center; margin-bottom: 20px;">
    <button onclick="showLogin()" style="padding: 10px 20px; background: #4b0082; color: white; border: none; border-radius: 4px; margin-right: 10px;">Log In</button>
    <button onclick="showRegister()" style="padding: 10px 20px; background: #4b0082; color: white; border: none; border-radius: 4px;">Register</button>
  </div>

  <!-- Login Section -->
  <div id="loginSection" style="display: none;">
    <h2 style="text-align: center;">Iniciar Sesión</h2>
    <div style="text-align: center; margin-bottom: 20px;">
      <button onclick="selectLoginType('usuario')" class="login-toggle">Usuario</button>
      <button onclick="selectLoginType('institucion')" class="login-toggle">Institución</button>
    </div>

    <!-- Login Usuario -->
    <div id="login_usuario" class="loginForm">
      <p style="text-align: center;">Iniciando sesión como Usuario</p>
      <form action="/process_login/usuario" method="POST">
        <label>Usuario o Correo:</label>
        <input type="text" name="username" required>
        <label>Contraseña:</label>
        <input type="password" name="password" required>
        <button type="submit">Iniciar Sesión</button>
      </form>
    </div>

    <!-- Login Institución -->
    <div id="login_institucion" class="loginForm" style="display:none;">
      <p style="text-align: center;">Iniciando sesión como Institución</p>
      <form action="/process_login/institucion" method="POST">
        <label>Usuario o Correo:</label>
        <input type="text" name="username" required>
        <label>Contraseña:</label>
        <input type="password" name="password" required>
        <button type="submit">Iniciar Sesión</button>
      </form>
    </div>
  </div>

  <!-- Register Section -->
  <div id="registerSection" style="display: none;">
    <h2 style="text-align: center;">Registrarse</h2>
    <div style="text-align: center; margin-bottom: 20px;">
      <button onclick="selectRegisterType('usuario')" class="register-toggle">Usuario</button>
      <button onclick="selectRegisterType('institucion')" class="register-toggle">Institución</button>
    </div>

    <!-- Registro Usuario -->
    <div id="register_usuario" class="registerForm">
      <p style="text-align: center;">Registrándose como Usuario</p>
      <form action="/process_register/usuario" method="POST">
        <label>Nombre:</label>
        <input type="text" name="first_name" required>
        <label>Apellido:</label>
        <input type="text" name="last_name" required>
        <label>Nombre de Usuario:</label>
        <input type="text" name="username" required>
        <label>Correo Electrónico:</label>
        <input type="email" name="email" required>
        <label>Contraseña:</label>
        <input type="password" name="password" required>
        <label>Confirmar Contraseña:</label>
        <input type="password" name="confirm_password" required>
        <button type="submit">Registrarse</button>
      </form>
    </div>

    <!-- Registro Institución -->
    <div id="register_institucion" class="registerForm" style="display:none;">
      <p style="text-align: center;">Registrándose como Institución</p>
      <form action="/process_register/institucion" method="POST">
        <label>Nombre de la Institución:</label>
        <input type="text" name="institution_name" required>
        <label>Correo de Contacto:</label>
        <input type="email" name="contact_email" required>
        <label>Teléfono:</label>
        <input type="text" name="phone">
        <label>Dirección:</label>
        <input type="text" name="address">
        <label>Contraseña:</label>
        <input type="password" name="password" required>
        <label>Confirmar Contraseña:</label>
        <input type="password" name="confirm_password" required>
        <button type="submit">Registrarse</button>
      </form>
    </div>
  </div>
</section>

<style>
  input, label, button {
    display: block;
    width: 100%;
    margin: 5px 0;
    font-size: 14px;
  }
  input {
    padding: 10px;
    box-sizing: border-box;
  }
  button[type="submit"] {
    margin-top: 10px;
    background: #4b0082;
    color: white;
    border: none;
    border-radius: 4px;
    padding: 10px;
  }
  .login-toggle, .register-toggle {
    padding: 8px 12px;
    margin: 0 5px;
    background: #222;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
</style>

<script>
  function showLogin() {
    document.getElementById("loginSection").style.display = "block";
    document.getElementById("registerSection").style.display = "none";
  }

  function showRegister() {
    document.getElementById("registerSection").style.display = "block";
    document.getElementById("loginSection").style.display = "none";
  }

  function selectLoginType(type) {
    document.getElementById("login_usuario").style.display = (type === 'usuario') ? 'block' : 'none';
    document.getElementById("login_institucion").style.display = (type === 'institucion') ? 'block' : 'none';
  }

  function selectRegisterType(type) {
    document.getElementById("register_usuario").style.display = (type === 'usuario') ? 'block' : 'none';
    document.getElementById("register_institucion").style.display = (type === 'institucion') ? 'block' : 'none';
  }
</script>
{% endblock %}

